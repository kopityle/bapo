# Используем легковесный официальный образ Python
FROM python:3.10-alpine

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем сначала файл с зависимостями
# (Это ускоряет сборку, если код меняется, а зависимости - нет)
COPY requirements.txt .

# Устанавливаем зависимости
RUN pip install -r requirements.txt

# Копируем ВСЕ .py файлы (app.py и ip_services.py)
COPY *.py .

# Указываем команду для запуска приложения при старте контейнера
# --host=0.0.0.0 нужно, чтобы сервер был доступен извне контейнера
CMD ["flask", "run", "--host=0.0.0.0"]